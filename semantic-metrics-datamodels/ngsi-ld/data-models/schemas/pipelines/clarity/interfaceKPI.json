{
    "$schema": "http://json-schema.org/schema#",
    "$schemaVersion": "1.0",
    "title": "InterfaceKPIAggregator",
    "description": "Entity that represents an aggregation of a network interface KPI.",
    "type": "object",
    "additionalProperties": false,
    "allOf": [
        {
            "$ref": "../task.json"
        },
        {
            "properties": {
                "type": {
                    "description": "NGSI-LD Entity identifier. It has to be InterfaceKPIAggregator",
                    "type": "string",
                    "enum": [
                        "InterfaceKPIAggregator"
                    ],
                    "default": "InterfaceKPIAggregator"
                },
                "hasInput": {
                    "$ref": "#/definitions/HasInput"
                },
                "kpi": {
                    "$ref": "#/definitions/Kpi"
                },
                "windowSize": {
                    "$ref": "#/definitions/WindowSize"
                }
            },
            "required": [
                "type",
                "hasInput",
                "kpi",
                "windowSize"
            ]
        }
    ],
    "definitions": {
        "Kpi": {
            "description": "Property. The KPI to be aggregated.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "$ref": "#/definitions/KpiOptions"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "KpiOptions": {
            "type": "string",
            "enum": [
                "throughput",
                "packet-loss"
            ]
        },
        "HasInput": {
            "description": "Relationship. GnmiCollector entity that provides input data to aggregate the interface KPI.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Relationship"
                },
                {
                    "properties": {
                        "object": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "object"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "WindowSize": {
            "description": "Property. Size of the aggregation window. This value is specified as an integer in milliseconds.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "type": "integer"
                        },
                        "unitCode": {
                            "type": "string",
                            "enum": [
                                "C26"
                            ],
                            "default": "C26"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        }
    }
}
