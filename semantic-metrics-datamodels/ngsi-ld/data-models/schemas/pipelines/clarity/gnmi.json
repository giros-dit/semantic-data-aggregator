{
    "$schema": "http://json-schema.org/schema#",
    "$schemaVersion": "1.0",
    "title": "GnmiCollector",
    "description": "Entity that represents a dynamic gNMI subscription.",
    "type": "object",
    "additionalProperties": false,
    "allOf": [
        {
            "$ref": "../task.json"
        },
        {
            "properties": {
                "type": {
                    "description": "NGSI-LD Entity identifier. It has to be GnmiCollector",
                    "type": "string",
                    "enum": [
                        "GnmiCollector"
                    ],
                    "default": "GnmiCollector"
                },
                "allowAggregation": {
                    "$ref": "#/definitions/AllowAggregation"
                },
                "encoding": {
                    "$ref": "#/definitions/Encoding"
                },
                "hasInput": {
                    "$ref": "#/definitions/HasInput"
                },
                "heartbeatInterval": {
                    "$ref": "#/definitions/HeartbeatInterval"
                },
                "mode": {
                    "$ref": "#/definitions/Mode"
                },
                "paths": {
                    "$ref": "#/definitions/Paths"
                },
                "prefix": {
                    "$ref": "#/definitions/Prefix"
                },
                "qos": {
                    "$ref": "#/definitions/Qos"
                },
                "sampleInterval": {
                    "$ref": "#/definitions/SampleInterval"
                },
                "streamMode": {
                    "$ref": "#/definitions/StreamMode"
                },
                "suppressRedundant": {
                    "$ref": "#/definitions/SuppressRedundant"
                },
                "updatesOnly": {
                    "$ref": "#/definitions/UpdatesOnly"
                },
                "useModels": {
                    "$ref": "#/definitions/UseModels"
                }
            },
            "required": [
                "type",
                "hasInput",
                "mode",
                "paths"
            ]
        }
    ],
    "definitions": {
        "AllowAggregation": {
            "description": "Property. Whether elements of the schema that are marked as eligible for aggregation.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "type": "boolean"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "Encoding": {
            "description": "Property. The encoding that the target should use within the Notifications generated.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "$ref": "#/definitions/EncodingOptions"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "EncodingOptions": {
            "type": "string",
            "enum": [
                "JSON",
                "BYTES",
                "PROTO",
                "ASCII",
                "JSON_IETF"
            ]
        },
        "HasInput": {
            "description": "Relationship. Target Device entity for the gNMI subscription.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Relationship"
                },
                {
                    "properties": {
                        "object": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "object"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "HeartbeatInterval": {
            "description": "Property. A heartbeat interval MAY be specified along with an 'on change' subscription - in this case, the value of the data item(s) MUST be re-sent once per heartbeat interval regardless of whether the value has changed or not. A heartbeat_interval MAY be specified to modify the behavior of suppress_redundant in a sampled subscription. In this case, the target MUST generate one telemetry update per heartbeat interval, regardless of whether the suppress_redundant flag is set to true. This value is specified as an integer in milliseconds.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "type": "integer"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "Mode": {
            "description": "Property. Specifies mode of the subscription.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "$ref": "#/definitions/ModeOptions",
                            "default": "STREAM"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "ModeOptions": {
            "type": "string",
            "enum": [
                "STREAM",
                "ONCE",
                "POLL"
            ]
        },
        "ModelData": {
            "description": "ModelData is used to describe a set of schema modules. It can be used in a CapabilityResponse where a target reports the set of modules that it supports, and within the SubscribeRequest and GetRequest messages to specify the set of models from which data tree elements should be reported. Reference: gNMI Specification Section 3.2.3.",
            "type": "object",
            "properties": {
                "name": {
                    "description": "Name of the model.",
                    "type": "string"
                },
                "organization": {
                    "description": "Organization publishing the model.",
                    "type": "string"
                },
                "version": {
                    "description": "Semantic version of the model.",
                    "type": "string"
                }
            }
        },
        "Paths": {
            "description": "Property. List of subscription paths for the named subscription.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "oneOf": [
                                {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                },
                                {
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "Prefix": {
            "description": "Property. Path to be set as the Subscribe Request Prefix.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "Qos": {
            "description": "Property. Specifies the DSCP marking that is to be used for the subscribe responses. This value is specified as an integer in milliseconds.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "type": "integer"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "SampleInterval": {
            "description": "Property. Specifies the sample interval for a STREAM/SAMPLE subscription.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "type": "integer"
                        },
                        "unitCode": {
                            "type": "string",
                            "enum": [
                                "C26"
                            ],
                            "default": "C26"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "StreamMode": {
            "description": "Property. If `mode` is set to STREAM, this defines the type of streamed subscription.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "$ref": "#/definitions/StreamModeOptions",
                            "default": "TARGET_DEFINED"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "StreamModeOptions": {
            "type": "string",
            "enum": [
                "SAMPLE",
                "TARGET_DEFINED",
                "ON_CHANGE"
            ]
        },
        "SuppressRedundant": {
            "description": "Property. If set to true, the target SHOULD NOT generate a telemetry update message unless the value of the path being reported on has changed since the last.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "type": "boolean"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "UpdatesOnly": {
            "description": "Property. If set to true, the target MUST not transmit the current state of the paths that the client has subscribed to, but rather should send only updates to them.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "type": "boolean"
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        },
        "UseModels": {
            "description": "Property. Schema definition modules.",
            "type": "object",
            "allOf": [
                {
                    "$ref": "../../entity.json#/definitions/Property"
                },
                {
                    "properties": {
                        "value": {
                            "oneOf": [
                                {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/ModelData"
                                    }
                                },
                                {
                                    "$ref": "#/definitions/ModelData"
                                }
                            ]
                        }
                    },
                    "required": [
                        "value"
                    ]
                }
            ],
            "additionalProperties": false
        }
    }
}
